jQuery(document).ready(function(a){function b(){a("#TB_window").css({height:a("#TB_ajaxContent").outerHeight()+30+"px",top:(a(window).height()+a(window).scrollTop())/2-(a("#TB_ajaxContent").outerHeight()-a(window).scrollTop()+30)/2+"px",opacity:1})}function c(b){var c=null;c="undefined"!=typeof b?b:a(".shortcode-dynamic-item"),c.find(".redux-opts-upload").on("click",function(a){var b=jQuery(this).parent(),c=jQuery(this).attr("rel-id");a.preventDefault(),custom_file_frame=null,custom_file_frame=wp.media.frames.customHeader=wp.media({title:jQuery(this).data("choose"),library:{type:"image"},button:{text:jQuery(this).data("update")}}),custom_file_frame.on("select",function(){var a=custom_file_frame.state().get("selection").first();jQuery(".redux-opts-screenshot",b).prop("src",a.attributes.url),jQuery("#"+c).val(a.attributes.url).trigger("change"),jQuery(".redux-opts-upload",b).hide(),jQuery(".redux-opts-screenshot",b).show(),jQuery(".redux-opts-upload-remove",b).show()}),custom_file_frame.open()}),c.find(".redux-opts-upload-remove").on("click",function(a){var b=jQuery(this).parent(),c=jQuery(this).attr("rel-id");a.preventDefault(),jQuery("#"+c).val(""),jQuery(this).prev().fadeIn("slow"),jQuery(".redux-opts-screenshot",b).fadeOut("slow"),jQuery(this).fadeOut("slow")})}function d(){var b=a("#thb-shortcodes").val(),c="";switch(b){case"icon_list":if(a(".shortcode-options[data-name="+b+"]").is(":visible")){var d=a(".shortcode-options[data-name="+b+"]").find("select[id="+b+"-icon]").val()||"fa-ok";a(".shortcode-options[data-name="+b+"] .shortcode-dynamic-item-input").each(function(){""!=a(this).val()&&(tabContent=a(this).parents(".shortcode-dynamic-item").find(".shortcode-dynamic-item-input").val(),c+=" [item] "+tabContent+" [/item] ")})}a("#shortcode-storage-thb").html('[icon-list icon="'+d+'"]'+c+"[/icon-list]")}}function e(){var b=a("#thb-shortcodes").val(),c=a("#options-"+b).data("type"),e="";if("dynamic"==c)return d(),!1;switch(b){case"quote":var f=a("input[name="+b+"-align]:checked").val()||"",g=a("input[id="+b+"-author]").val(),h=a("textarea[id="+b+"-content]").val();if(""!=f)var i='pull="'+f+'"';else var i="";e='[blockquote author="'+g+'" '+i+"]"+h+"[/blockquote]";break;case"thb_button":var j=a("input[name="+b+"-size]:checked").val()||"small",k=a("input[name="+b+"-color]:checked").val()||"black",l=a("input[name="+b+"-animation]:checked").val()||"",m=a("input[id="+b+"-icon]").val(),n=a("input[id="+b+"-title]").val(),o=a("input[id="+b+"-link]").val(),p=a("input[id="+b+"-target_blank]:checked").length;if(p)var p='target_blank="true"';else var p="";e='[thb_button link="'+o+'" color="'+k+'" icon="'+m+'" size="'+j+'" animation="'+l+'" '+p+' caption="'+n+'"]';break;case"video":var q=a("input[id="+b+"-id]").val(),r=a("input[name="+b+"-type]:checked").val()||"youtube",s=a("input[name="+b+"-format]:checked").val()||"widescreen";e='[video id="'+q+'" type="'+r+'" format="'+s+'"]';break;case"small_title":var n=a("input[id="+b+"-title]").val()||"title";e='[small_title title="'+n+'"]';break;case"large_title":var n=a("input[id="+b+"-title]").val()||"title",t=a("input[id="+b+"-center]:checked").length;if(t)var t='center="true"';else var t="";e='[large_title title="'+n+'" '+t+"]";break;case"tags":var k=a("input[name="+b+"-color]:checked").val()||"black",h=a("input[id="+b+"-text]").val();e='[tags color="'+k+'"]'+h+"[/tags]";break;case"notifications":var r=a("input[name="+b+"-type]:checked").val()||"success",n=a("input[id="+b+"-title]").val(),e=a("textarea[id="+b+"-content]").val();e='[notification type="'+r+'" title="'+n+'"]'+e+"[/notification]";break;case"seperator":var u=a("input[name="+b+"-type]:checked").val()||"style1",n=a("input[id="+b+"-title]").val()||"Divider";e='[seperator style="'+u+'"]'+n+"[/seperator]";break;case"dropcap":var v=a("input[name="+b+"-boxed]:checked").val()||"black",r="";e='[dropcap boxed="'+v+'"]A[/dropcap]';break;case"toggle":var n=a("input[id="+b+"-title]").val(),h=a("textarea[id="+b+"-content]").val();e='[toggle title="'+n+'"]'+h+"[/toggle]";break;case"single_icon":var o=a("input[id="+b+"-icon_link]").val(),m=a("select[id="+b+"-icon]").val()||"fa-leaf",j=a("input[name="+b+"-size]:checked").val()||"icon-smallsize",v=a("input[id="+b+"-boxed]:checked").length;a("input[id="+b+"-rounded]:checked").length;if(v)var w='box="true"';else var w="";if(o)var x='url="'+o+'"';else var x="";e='[icon type="'+m+'" size="'+j+'" '+x+" "+w+"]"}a("#shortcode-storage-thb").html(e)}a("#TB_window").css("opacity",0),setTimeout(b,100),a(window).resize(b),c(),a("select#thb-shortcodes").chosen(),a(".colorpicker").wpColorPicker({palettes:!1});var f=tinyMCE.activeEditor;a("#thb-shortcodes").change(function(){a(".shortcode-options").hide(),a("#options-"+a(this).val()).show(),e()}),a("#add-shortcode").click(function(){var b=a("#thb-shortcodes").val();a("#options-"+b).attr("data-type");return e(),f.selection.setContent(a("#shortcode-storage-thb").html()),tb_remove(),!1}),a("[id^=shortcode-option]").change(function(){e()}),a(".add-list-item").click(function(){a(this).parent().find(".remove-list-item").is(":visible")||a(this).parent().find(".remove-list-item").show();var b=a(this).parent().find(".shortcode-dynamic-item:first").clone();return b.find("input[type=text], textarea").prop("value",""),b.find(".redux-opts-upload").length>0&&(b.find(".redux-opts-screenshot").prop("src",""),b.find(".redux-opts-upload-remove").hide(),b.find(".redux-opts-upload").css("display","inline-block"),setTimeout(function(){c(b)},200)),a(this).parent().find(".shortcode-dynamic-items").append(b),!1}),a(".remove-list-item").hide().live("click",function(){return a(this).parent().find(".shortcode-dynamic-item").length>1&&(a(this).parent().find("#options-item .shortcode-dynamic-item:last").remove(),d()),1==a(this).parent().find(".shortcode-dynamic-item").length&&a(this).hide(),!1})});