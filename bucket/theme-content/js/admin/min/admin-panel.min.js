!function(e){function t(){e(window).scrollTop()>20?e(".redux-container").addClass("fixed-header"):e(".redux-container").removeClass("fixed-header")}e(document).ready(function(){var t=jQuery("#wpGrade_import_demodata_button"),o=jQuery("#redux-form-wrapper"),n={container:o,ajaxUrl:e("input[name=wpGrade_import_ajax_url]",o).val(),optionSlug:e("input[name=wpGrade_options_page_slug]",o).val(),nonceImportPostsPages:e("input[name=wpGrade-nonce-import-posts-pages]",o).val(),nonceImportThemeOptions:e("input[name=wpGrade-nonce-import-theme-options]",o).val(),nonceImportWidgets:e("input[name=wpGrade-nonce-import-widgets]",o).val(),ref:e("input[name=_wp_http_referer]",o).val()};t.bind("click",{set:n},function(t){function o(){for(u=0;c>u;)u++,h.Queue({type:"POST",url:s.ajaxUrl,data:{action:"wpGrade_ajax_import_posts_pages",_wpnonce:s.nonceImportPostsPages,_wp_http_referer:s.ref,step_number:u,number_of_steps:c}}).fail(function(e){d=e,l=wpAjax.parseAjaxResponse(e,"notifier"),p.append('<i style="color:red">The importing of the demo posts, pages and custom posts has failed...</i><br />')}).done(function(e){d=e,l=wpAjax.parseAjaxResponse(e,"notifier"),null!=l&&null!=l.errors?0==l.errors?null!=l.responses[0]?(p.append("<i>Finished importing the demo posts, pages, custom posts... | Step "+l.responses[0].supplemental.stepNumber+" of "+l.responses[0].supplemental.numberOfSteps+"</i><br />"),p.append('<div style="display:none;visibility:hidden;">Return data:<br />'+l.responses[0].data+"</div>")):p.append('<i style="color:red">The importing of the demo posts, pages and custom posts has failed</i><br />'):null!=l.responses[0]?p.append('<i style="color:red">The importing of the demo posts, pages and custom posts has failed</i><br />(The script returned the following message: '+l.responses[0].errors[0].message+" )<br/>"):p.append('<i style="color:red">The importing of the demo posts, pages and custom posts has failed</i><br />'):p.append('<i style="color:red">The importing of the demo posts, pages and custom posts has failed. You can reload the page and try again.</i><br />')})}function n(){h.Queue({type:"POST",url:s.ajaxUrl,data:{action:"wpGrade_ajax_import_theme_options",_wpnonce:s.nonceImportThemeOptions,_wp_http_referer:s.ref}}).fail(function(e){d=e,l=wpAjax.parseAjaxResponse(e,"notifier"),p.append('<i style="color:red">The importing of the theme options has failed...</i><br />')}).done(function(e){d=e,l=wpAjax.parseAjaxResponse(e,"notifier"),null!=l&&null!=l.errors?0==l.errors?(p.append("<i>Finished importing the demo theme options...</i><br />"),p.append('<div style="display:none;visibility:hidden;">Return data:<br />'+l.responses[0].data+"</div>")):p.append('<i style="color:red">The importing of the theme options has failed</i><br />(The script returned the following message: '+l.responses[0].errors[0].message+" )<br/><br/>"):p.append('<i style="color:red">The importing of the theme options has failed</i><br />')})}function i(){h.Queue({type:"POST",url:s.ajaxUrl,data:{action:"wpGrade_ajax_import_widgets",_wpnonce:s.nonceImportWidgets,_wp_http_referer:s.ref}}).fail(function(){d=response,l=wpAjax.parseAjaxResponse(response,"notifier"),p.append('<i style="color:red">The setting up of the demo widgets failed...</i><br />')}).done(function(e){d=e,l=wpAjax.parseAjaxResponse(e,"notifier"),null!=l&&null!=l.errors?0==l.errors?(p.append("<i>Finished setting up the demo widgets...</i><br />"),p.append('<div style="display:none;visibility:hidden;">Return data:<br />'+l.responses[0].data+"</div>")):p.append('<i style="color:red">The setting up of the demo widgets failed</i><br />(The script returned the following message: '+l.responses[0].errors[0].message+" )<br/><br/>"):p.append('<i style="color:red">The setting up of the demo widgets failed</i><br />')})}var r=e(this),s=t.data.set,a=(e(".wpGrade_import_demodata_wait",s.container),!0),p=e(".wpGrade-import-results",s.container);if(r.is(".wpGrade_button_inactive"))return!1;if(a=confirm("Importing the demo data will overwrite your current Theme Options settings. Proceed anyway?"),0==a)return!1;var d=null,l=null,u=0,c=10,h=e.qjax({timeout:3e3,ajaxSettings:{type:"POST",url:ajaxurl},onQueueChange:function(t){0==t&&(0==l.errors?(setTimeout(function(){e(".wpGrade-loading-wrap",s.container).slideUp(400)},1e3),setTimeout(function(){p.append("<i>All done!</i><br />")},1e3),setTimeout(function(){e("body").wpGrade_popup({title:"Phew...that was a hard one!",text:"The demo data was imported without a glitch! Awesome! <br/><br/>Remember to update the passwords and roles of imported users. <br/>Also don't forget to change the email address in the Contact Form 7 form. <br/><br/><i>We will now reload the page so you can see the brand new data!</i>",time_to_show:12e3},function(){window.location.hash="#wpwrap",window.location.reload(!0)})},2e3)):(r.removeClass("button-disabled"),e(".wpGrade-loading-wrap",s.container).slideUp().addClass("hidden"),e("body").wpGrade_popup({popup_class:"error",title:"Total Bummer...",text:"The import didn't work completely! <br/> Check out the errors given. You might want to try reloading the page and then try again.",time_to_show:5e3})))},onError:function(){null!=l.errors&&0!=l.errors&&h.Clear()},onStop:function(){null!=l.errors&&0!=l.errors&&h.Clear()}});return e(".wpGrade-loading-wrap",s.container).css({opacity:0,display:"block",visibility:"visible"}).removeClass("hidden").animate({opacity:1}),r.addClass("button-disabled"),p.removeClass("hidden"),p.append("<br /><i>Working...</i><br />"),n(),i(),o(),!1})}),e.fn.wpGrade_popup=function(t,o){var n={popup_class:"success",title:"Notification",text:"All things are good! Carry on...",time_to_show:3e3},i=e.extend(n,t);return this.each(function(){var t=e(this),n=e("<div/>").addClass("wpGrade_popup wpGrade_popup_"+i.popup_class).css("opacity",0).html('<div class="wpGrade_popup_title"><span class="wpGrade_popup_icon"></span> '+i.title+'</div><div class="wpGrade_popup_content">'+i.text+"</div>").appendTo(t);n.animate({opacity:1},function(){n.delay(i.time_to_show).fadeOut(function(){n.remove(),"function"==typeof o&&o()})})})},function(e){e.qjax=function(t){var o=e.extend({timeout:null,onStart:null,onStop:null,onError:null,onTimeout:null,onQueueChange:null,queueChangeDelay:0,ajaxSettings:{contentType:"application/x-www-form-urlencoded; charset=UTF-8",type:"GET"}},t),n=[],i=null,r=null,s=this,a=!1,p=function(){a||(a=!0,o.onTimeout&&o.timeout&&e.isFunction(o.onTimeout)&&(r&&clearTimeout(r),r=setTimeout(e.proxy(function(){o.onTimeout.call(this,i.options)},this),o.timeout)),o.onStart&&e.isFunction(o.onStart)&&o.onStart(this,i.options))},d=function(){a&&n.length<=0&&(a=!1,r&&clearTimeout(r),o.onStop&&e.isFunction(o.onStop)&&o.onStop(this,i.options))},l=function(){if(o.onQueueChange&&o.onQueueChange.call(s,n.length),n.length>=1&&!i)if(i=n.shift(),i.options.isCallback)i.options.complete();else{p();var t=e.ajax(i.options);for(var r in i.promise)for(var a in i.promise[r])t[r].call(this,i.promise[r][a])}},u=function(e,t,o){this.options=e,this.complete=t,this.context=o,this.promise={done:[],then:[],always:[],fail:[]}};return u.prototype._promise=function(e,t){return this.promise[e]&&this.promise[e].push(t),this},u.prototype.done=function(e){return this._promise("done",e)},u.prototype.then=function(e){return this._promise("then",e)},u.prototype.always=function(e){return this._promise("always",e)},u.prototype.fail=function(e){return this._promise("fail",e)},this.Clear=function(){n=[]},this.Queue=function(t,r){var s={},a=null;t instanceof Function?(s={isCallback:!0},a=t):(s=e.extend({},o.ajaxSettings,t||{}),a=s.complete),s.complete=function(t,n){"error"==n&&o.onError&&e.isFunction(o.onError)&&o.onError.call(i.context||this,t,n),i&&(i.complete&&i.complete.call(i.context||this,t,n),d(),i=null,l())};var t=new u(s,a,r);return n.push(t),setTimeout(l,o.queueChangeDelay),t},this}}(jQuery),e(".redux-container").length&&e("body").addClass("redux-page"),e(window).scroll(t),t(),e(".redux-main").css({"min-height":e(window).height()+"px"}),e(window).resize(function(){e(".redux-main").css({"min-height":e(window).height()+"px"})}),e(".redux-page .settings-error").hide(),e(".redux-sidebar .redux-group-menu li:last-child").remove(),e(document).ready(function(){e(".redux-page .settings-error").parent().hide()})}(jQuery);