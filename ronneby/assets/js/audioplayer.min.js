!function(e,t,a){var i="ontouchstart"in t,n=i?"touchstart":"mousedown",o=i?"touchmove":"mousemove",d=i?"touchcancel":"mouseup",l=function(e){var t=e/3600,a=Math.floor(t),i=e%3600/60,n=Math.floor(i),o=Math.ceil(e%3600%60);return o>59&&(o=0,n=Math.ceil(i)),n>59&&(n=0,a=Math.ceil(t)),(0==a?"":a>0&&a.toString().length<2?"0"+a+":":a+":")+(n.toString().length<2?"0"+n:n)+":"+(o.toString().length<2?"0"+o:o)},u=function(e){var t=a.createElement("audio");return!(!t.canPlayType||!t.canPlayType("audio/"+e.split(".").pop().toLowerCase()+";").replace(/no/,""))};e.fn.audioPlayer=function(t){var t=e.extend({classPrefix:"audioplayer",strPlay:"Play",strPause:"Pause",strVolume:"Volume"},t),a={},r={playPause:"playpause",playing:"playing",stopped:"stopped",time:"time",timeCurrent:"time-current",timeDuration:"time-duration",bar:"bar",barLoaded:"bar-loaded",barPlayed:"bar-played",volume:"volume",volumeButton:"volume-button",volumeAdjust:"volume-adjust",noVolume:"novolume",muted:"muted",mini:"mini"};for(var s in r)a[s]=t.classPrefix+"-"+r[s];return this.each(function(){if("audio"!=e(this).prop("tagName").toLowerCase())return!1;var r=e(this),s=r.attr("src"),v=r.get(0).getAttribute("autoplay"),v=""===v||"autoplay"===v?!0:!1,m=r.get(0).getAttribute("loop"),m=""===m||"loop"===m?!0:!1,c=!1;"undefined"==typeof s?r.find("source").each(function(){return s=e(this).attr("src"),"undefined"!=typeof s&&u(s)?(c=!0,!1):void 0}):u(s)&&(c=!0);var f=e('<div class="'+t.classPrefix+'">'+(c?e("<div>").append(r.eq(0).clone()).html():'<embed src="'+s+'" width="0" height="0" volume="100" autostart="'+v.toString()+'" loop="'+m.toString()+'" />')+'<div class="'+a.playPause+'" title="'+t.strPlay+'"><a href="#">'+t.strPlay+"</a></div></div>"),h=f.find(c?"audio":"embed"),h=h.get(0);if(c){f.find("audio").css({width:0,height:0,visibility:"hidden"}),f.append('<div class="'+a.time+" "+a.timeCurrent+'"></div><div class="'+a.bar+'"><div class="'+a.barLoaded+'"></div><div class="'+a.barPlayed+'"></div></div><div class="'+a.time+" "+a.timeDuration+'"></div><div class="'+a.volume+'"><div class="'+a.volumeButton+'" title="'+t.strVolume+'"><a href="#">'+t.strVolume+'</a></div><div class="'+a.volumeAdjust+'"><div><div></div></div></div></div>');var p=f.find("."+a.bar),y=f.find("."+a.barPlayed),g=f.find("."+a.barLoaded),b=f.find("."+a.timeCurrent),P=f.find("."+a.timeDuration),C=f.find("."+a.volumeButton),w=f.find("."+a.volumeAdjust+" > div"),E=0,M=function(e){theRealEvent=i?e.originalEvent.touches[0]:e,h.currentTime=Math.round(h.duration*(theRealEvent.pageX-p.offset().left)/p.width())},L=function(e){theRealEvent=i?e.originalEvent.touches[0]:e,h.volume=Math.abs((theRealEvent.pageX-(w.offset().left+w.width()))/w.width())},S=function(){var e=setInterval(function(){return h.buffered.length<1?!0:(g.width(h.buffered.end(0)/h.duration*100+"%"),void(Math.floor(h.buffered.end(0))>=Math.floor(h.duration)&&clearInterval(e)))},100)},V=h.volume,j=h.volume=.111;Math.round(1e3*h.volume)/1e3==j?h.volume=V:f.addClass(a.noVolume),P.html("&hellip;"),b.html(l(0)),h.addEventListener("loadeddata",function(){S(),P.html(e.isNumeric(h.duration)?l(h.duration):"&hellip;"),w.find("div").width(100*h.volume+"%"),E=h.volume}),h.addEventListener("timeupdate",function(){b.html(l(h.currentTime)),y.width(h.currentTime/h.duration*100+"%")}),h.addEventListener("volumechange",function(){w.find("div").width(100*h.volume+"%"),h.volume>0&&f.hasClass(a.mute)&&f.removeClass(a.mute),h.volume<=0&&!f.hasClass(a.mute)&&f.addClass(a.mute)}),h.addEventListener("ended",function(){f.removeClass(a.playing).addClass(a.stopped)}),p.on(n,function(e){M(e),p.on(o,function(e){M(e)})}).on(d,function(){p.unbind(o)}),C.on("click",function(){return f.hasClass(a.muted)?(f.removeClass(a.muted),h.volume=E):(f.addClass(a.muted),E=h.volume,h.volume=0),!1}),w.on(n,function(e){L(e),w.on(o,function(e){L(e)})}).on(d,function(){w.unbind(o)})}else f.addClass(a.mini);f.addClass(v?a.playing:a.stopped),f.find("."+a.playPause).on("click",function(){return f.hasClass(a.playing)?(e(this).attr("title",t.strPlay).find("a").html(t.strPlay),f.removeClass(a.playing).addClass(a.stopped),c?h.pause():h.Stop()):(e(this).attr("title",t.strPause).find("a").html(t.strPause),f.addClass(a.playing).removeClass(a.stopped),c?h.play():h.Play()),!1}),r.replaceWith(f)}),this}}(jQuery,window,document);
(function($){
	"use strict";
	
	$(document).ready(function($){
		$.fn.addAudioPlayer = function() {
			$(this).each(function() {
				if(!$(this).find('div.audioplayer').length && $(this).find('audio').length) {
					$('audio').audioPlayer();
				}
			});
			return this;
		};
		$('.post.format-audio').addAudioPlayer();
	});
})(jQuery);
