
/*!
jQuery Waypoints - v2.0.5
Copyright (c) 2011-2014 Caleb Troughton
Licensed under the MIT license.
https://github.com/imakewebthings/jquery-waypoints/blob/master/licenses.txt
*/
(function(){var a=[].indexOf||function(e){for(var d=0,c=this.length;d<c;d++){if(d in this&&this[d]===e){return d}}return -1},b=[].slice;(function(c,d){if(typeof define==="function"&&define.amd){return define("waypoints",["jquery"],function(e){return d(e,c)})}else{return d(c.jQuery,c)}})(window,function(d,g){var p,n,q,s,j,e,f,k,i,t,h,m,r,o,c,l;p=d(g);k=a.call(g,"ontouchstart")>=0;s={horizontal:{},vertical:{}};j=1;f={};e="waypoints-context-id";h="resize.waypoints";m="scroll.waypoints";r=1;o="waypoints-waypoint-ids";c="waypoint";l="waypoints";n=(function(){function u(v){var w=this;this.$element=v;this.element=v[0];this.didResize=false;this.didScroll=false;this.id="context"+j++;this.oldScroll={x:v.scrollLeft(),y:v.scrollTop()};this.waypoints={horizontal:{},vertical:{}};this.element[e]=this.id;f[this.id]=this;v.bind(m,function(){var x;if(!(w.didScroll||k)){w.didScroll=true;x=function(){w.doScroll();return w.didScroll=false};return g.setTimeout(x,d[l].settings.scrollThrottle)}});v.bind(h,function(){var x;if(!w.didResize){w.didResize=true;x=function(){d[l]("refresh");return w.didResize=false};return g.setTimeout(x,d[l].settings.resizeThrottle)}})}u.prototype.doScroll=function(){var v,w=this;v={horizontal:{newScroll:this.$element.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.$element.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};if(k&&(!v.vertical.oldScroll||!v.vertical.newScroll)){d[l]("refresh")}d.each(v,function(z,y){var B,A,x;x=[];A=y.newScroll>y.oldScroll;B=A?y.forward:y.backward;d.each(w.waypoints[z],function(E,D){var F,C;if((y.oldScroll<(F=D.offset)&&F<=y.newScroll)){return x.push(D)}else{if((y.newScroll<(C=D.offset)&&C<=y.oldScroll)){return x.push(D)}}});x.sort(function(D,C){return D.offset-C.offset});if(!A){x.reverse()}return d.each(x,function(D,C){if(C.options.continuous||D===x.length-1){return C.trigger([B])}})});return this.oldScroll={x:v.horizontal.newScroll,y:v.vertical.newScroll}};u.prototype.refresh=function(){var x,v,w,y=this;w=d.isWindow(this.element);v=this.$element.offset();this.doScroll();x={horizontal:{contextOffset:w?0:v.left,contextScroll:w?0:this.oldScroll.x,contextDimension:this.$element.width(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:w?0:v.top,contextScroll:w?0:this.oldScroll.y,contextDimension:w?d[l]("viewportHeight"):this.$element.height(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};return d.each(x,function(A,z){return d.each(y.waypoints[A],function(F,C){var E,D,H,G,B;E=C.options.offset;H=C.offset;D=d.isWindow(C.element)?0:C.$element.offset()[z.offsetProp];if(d.isFunction(E)){E=E.apply(C.element)}else{if(typeof E==="string"){E=parseFloat(E);if(C.options.offset.indexOf("%")>-1){E=Math.ceil(z.contextDimension*E/100)}}}C.offset=D-z.contextOffset+z.contextScroll-E;if((C.options.onlyOnScroll&&(H!=null))||!C.enabled){return}if(H!==null&&(H<(G=z.oldScroll)&&G<=C.offset)){return C.trigger([z.backward])}else{if(H!==null&&(H>(B=z.oldScroll)&&B>=C.offset)){return C.trigger([z.forward])}else{if(H===null&&z.oldScroll>=C.offset){return C.trigger([z.forward])}}}})})};u.prototype.checkEmpty=function(){if(d.isEmptyObject(this.waypoints.horizontal)&&d.isEmptyObject(this.waypoints.vertical)){this.$element.unbind([h,m].join(" "));return delete f[this.id]}};return u})();q=(function(){function u(v,x,w){var y,z;if(w.offset==="bottom-in-view"){w.offset=function(){var A;A=d[l]("viewportHeight");if(!d.isWindow(x.element)){A=x.$element.height()}return A-d(this).outerHeight()}}this.$element=v;this.element=v[0];this.axis=w.horizontal?"horizontal":"vertical";this.callback=w.handler;this.context=x;this.enabled=w.enabled;this.id="waypoints"+r++;this.offset=null;this.options=w;x.waypoints[this.axis][this.id]=this;s[this.axis][this.id]=this;y=(z=this.element[o])!=null?z:[];y.push(this.id);this.element[o]=y}u.prototype.trigger=function(v){if(!this.enabled){return}if(this.callback!=null){this.callback.apply(this.element,v)}if(this.options.triggerOnce){return this.destroy()}};u.prototype.disable=function(){return this.enabled=false};u.prototype.enable=function(){this.context.refresh();return this.enabled=true};u.prototype.destroy=function(){delete s[this.axis][this.id];delete this.context.waypoints[this.axis][this.id];return this.context.checkEmpty()};u.getWaypointsByElement=function(v){var x,w;w=v[o];if(!w){return[]}x=d.extend({},s.horizontal,s.vertical);return d.map(w,function(y){return x[y]})};return u})();t={init:function(w,u){var v;u=d.extend({},d.fn[c].defaults,u);if((v=u.handler)==null){u.handler=w}this.each(function(){var A,z,y,x;A=d(this);y=(x=u.context)!=null?x:d.fn[c].defaults.context;if(!d.isWindow(y)){y=A.closest(y)}y=d(y);z=f[y[0][e]];if(!z){z=new n(y)}return new q(A,z,u)});d[l]("refresh");return this},disable:function(){return t._invoke.call(this,"disable")},enable:function(){return t._invoke.call(this,"enable")},destroy:function(){return t._invoke.call(this,"destroy")},prev:function(v,u){return t._traverse.call(this,v,u,function(w,x,y){if(x>0){return w.push(y[x-1])}})},next:function(v,u){return t._traverse.call(this,v,u,function(w,x,y){if(x<y.length-1){return w.push(y[x+1])}})},_traverse:function(x,v,w){var u,y;if(x==null){x="vertical"}if(v==null){v=g}y=i.aggregate(v);u=[];this.each(function(){var z;z=d.inArray(this,y[x]);return w(u,z,y[x])});return this.pushStack(u)},_invoke:function(u){this.each(function(){var v;v=q.getWaypointsByElement(this);return d.each(v,function(x,w){w[u]();return true})});return this}};d.fn[c]=function(){var u,v;v=arguments[0],u=2<=arguments.length?b.call(arguments,1):[];if(t[v]){return t[v].apply(this,u)}else{if(d.isFunction(v)){return t.init.apply(this,arguments)}else{if(d.isPlainObject(v)){return t.init.apply(this,[null,v])}else{if(!v){return d.error("jQuery Waypoints needs a callback function or handler option.")}else{return d.error("The "+v+" method does not exist in jQuery Waypoints.")}}}}};d.fn[c].defaults={context:g,continuous:true,enabled:true,horizontal:false,offset:0,triggerOnce:false};i={refresh:function(){return d.each(f,function(v,u){return u.refresh()})},viewportHeight:function(){var u;return(u=g.innerHeight)!=null?u:p.height()},aggregate:function(x){var v,w,u;v=s;if(x){v=(u=f[d(x)[0][e]])!=null?u.waypoints:void 0}if(!v){return[]}w={horizontal:[],vertical:[]};d.each(w,function(z,y){d.each(v[z],function(B,A){return y.push(A)});y.sort(function(B,A){return B.offset-A.offset});w[z]=d.map(y,function(A){return A.element});return w[z]=d.unique(w[z])});return w},above:function(u){if(u==null){u=g}return i._filter(u,"vertical",function(w,v){return v.offset<=w.oldScroll.y})},below:function(u){if(u==null){u=g}return i._filter(u,"vertical",function(w,v){return v.offset>w.oldScroll.y})},left:function(u){if(u==null){u=g}return i._filter(u,"horizontal",function(w,v){return v.offset<=w.oldScroll.x})},right:function(u){if(u==null){u=g}return i._filter(u,"horizontal",function(w,v){return v.offset>w.oldScroll.x})},enable:function(){return i._invoke("enable")},disable:function(){return i._invoke("disable")},destroy:function(){return i._invoke("destroy")},extendFn:function(u,v){return t[u]=v},_invoke:function(v){var u;u=d.extend({},s.vertical,s.horizontal);return d.each(u,function(x,w){w[v]();return true})},_filter:function(u,w,y){var v,x;v=f[d(u)[0][e]];if(!v){return[]}x=[];d.each(v.waypoints[w],function(A,z){if(y(v,z)){return x.push(z)}});x.sort(function(A,z){return A.offset-z.offset});return d.map(x,function(z){return z.element})}};d[l]=function(){var u,v;v=arguments[0],u=2<=arguments.length?b.call(arguments,1):[];if(i[v]){return i[v].apply(null,u)}else{return i.aggregate.call(null,v)}};d[l].settings={resizeThrottle:100,scrollThrottle:30};return p.on("load.waypoints",function(){return d[l]("refresh")})})}).call(this);